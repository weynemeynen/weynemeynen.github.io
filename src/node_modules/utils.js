import { parse } from 'query-string'

export const range = (start, end) => {
  return [...Array(end).keys()].map(el => el + start)
}

export const limit = 3

export const getPaginator = (search) => {
  const parsedSearch = parse(search)
  const currentPage = parsedSearch.page ? Number(parsedSearch.page) : 1
  const offset = currentPage * limit - limit
  return { currentPage, offset }
}

export const formatDate = (date) => {
  const diff = Date.now() - Date.parse(date)

  // преобразовать разницу в секунды
  let sec = Math.floor(diff / 1000);
  if (sec < 60) {
    return 'только что';
  }
  // преобразовать разницу в минуты
  let min = Math.floor(diff / 1000 / 60);
  if (min < 60) {
    return min + ' мин. назад';
  }
  // в часы
  let houre = Math.floor(diff / 1000 / 60 / 24);
  if (houre < 60) {
    return houre + ' час. назад';
  }

  // отформатировать дату
  // добавить ведущие нули к единственной цифре дню/месяцу/часам/минутам
  let d = new Date(date)
  d = [
    '0' + d.getDate(),
    '0' + (d.getMonth() + 1),
    '' + d.getFullYear(),
    '0' + d.getHours(),
    '0' + d.getMinutes()
  ].map(component => component.slice(-2)); // взять последние 2 цифры из каждой компоненты
  // соединить компоненты в дату
  return d.slice(0, 3).join('.')
}