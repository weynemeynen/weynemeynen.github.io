import React, { createContext, useEffect, useState } from 'react'

import useLocalStorage from 'hooks/useLocalStorage'

export const ThemeContext = createContext([{}, () => { }])

export const ContextProvider = ({ children }) => {
  const [localTheme, setLocalTheme] = useLocalStorage('theme')
  const [state, setState] = useState(() => {
    return localTheme || 'light'
  })

  useEffect(() => {
    setLocalTheme(state)
  }, [state])

  return (
    <ThemeContext.Provider value={[state, setState]}>
      {children}
    </ThemeContext.Provider>
  )
}