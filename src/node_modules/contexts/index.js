import React, { createContext, useEffect, useState } from 'react'

import useLocalStorage from 'hooks/useLocalStorage'

export const LIGHT = 'white'
export const DARK = 'dark'

export const ThemeContext = createContext([{}, () => { }])
export const CurrentUserContext = createContext()

export const ContextProvider = ({ children }) => {
  const [localTheme, setLocalTheme] = useLocalStorage('theme')
  const [state, setState] = useState(() => {
    return localTheme || LIGHT
  })

  useEffect(() => {
    setLocalTheme(state)
  }, [state])

  const [currentUserState, setCurrentUserState] = useState([])

  return (
    <ThemeContext.Provider value={[state, setState]}>
      <CurrentUserContext.Provider value={[currentUserState, setCurrentUserState]}>
        {children}
      </CurrentUserContext.Provider>
    </ThemeContext.Provider>
  )
}