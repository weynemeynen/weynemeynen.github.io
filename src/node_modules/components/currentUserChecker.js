import { useContext, useEffect } from 'react'

import useFetch from 'hooks/useFetch'
import { CurrentUserContext } from 'contexts'

export default function CurrentUserChecker({ children }) {
  const apiUrl = `weynemeynen`
//   const apiUrl = `Tadatuta` // другой user
  const [{ response }, doFetch] = useFetch(`/users/${apiUrl}`)
  const [, setCurrentUserState] = useContext(CurrentUserContext)

  useEffect(() => {
    doFetch()
  }, [])

  useEffect(() => {
    if (!response) return
    setCurrentUserState(response)
  }, [response, setCurrentUserState])

  return children
}
