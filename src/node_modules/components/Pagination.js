import React, { useContext } from 'react'
import { Link } from 'react-router-dom'
import className from 'classnames'

import { ThemeContext } from 'contexts'
import { range } from 'utils'

const PaginationItem = ({ page, currentPage, url }) => {
  const [theme,] = useContext(ThemeContext)
  const pageItemClasses = className({
    active: currentPage === page
  })

  const pageLinkColor = className({
    'text-light': theme === 'dark',
    'text-dark': theme === 'light',
    'bg-secondary': theme === 'dark',
    'bg-white': theme === 'light',
    'border-secondary': currentPage === page && theme === 'light',
    'border-white': currentPage === page && theme === 'dark',
    'fw-bold': currentPage === page,
  })

  return (
    <li className={`page-item ${pageItemClasses}`}>
      <Link to={`${url}?page=${page}`} className={`page-link mb-1 me-1 ${pageLinkColor}`} style={{ borderColor: 'transparent' }}>{page}</Link>
    </li>
  )
}

export default function Pagination({ total, limit, url, currentPage }) {
  const pageCount = Math.ceil(total / limit)
  const pages = range(1, pageCount)

  return (
    <nav className="pagination flex-wrap my-4">
      {pages.map(page => (
        <PaginationItem
          page={page}
          currentPage={currentPage}
          url={url}
          key={page}
        />
      ))}
    </nav>
  )
}