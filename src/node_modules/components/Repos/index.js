import React, { useContext } from 'react'
import classNames from 'classnames'

import { ThemeContext, DARK } from 'contexts'
import { formatDate } from 'utils'

import 'components/Repos/repos.css'

export default function Repos({ repos }) {
  const [theme,] = useContext(ThemeContext)

  const textColorLink = theme === DARK ? 'info' : 'primary'
  const borderColor = theme === DARK ? 'border-secondary' : ''

  return (
    <div className='repos'>
      {repos.map((repo) => {
        const languageClass = classNames({
          'info': repo.language === 'Vue',
          'warning': repo.language === 'JavaScript',
          'danger': repo.language === 'HTML',
        })
        return (
          <div className={`card border-top-0 border-start-0 border-end-0 rounded-0 bg-transparent ${borderColor}`} key={repo.id}>
            <div className="row g-0">
              <div className="col-sm-12">
                <div className="card-body d-flex py-4">
                  <div className='col flex-grow-1'>
                    <a href={`/repos/${repo.name}`} className={`card-title fs-5 fw-bold text-decoration-none text-${textColorLink}`}>{repo.name}</a>
                    <small className="card-text d-block">{repo.description}</small>
                    <small className="card-text d-block">
                      <small>
                        <span className={`rounded-circle d-inline-block me-1 border border-secondary bg-${languageClass}`} style={{ width: '10px', height: '10px' }}></span>
                        <span className='me-3'>{repo.language}</span>
                      </small>
                      <small className="text-muted">
                        <span className='me-1'>обновлено</span>
                        <span>{formatDate(repo.updated_at)}</span>
                      </small>
                    </small>
                  </div>
                  <div className='col d-flex align-items-center flex-grow-0'>
                  </div>
                </div>
              </div>
            </div>
          </div>
        )
      })}
    </div>
  )
}